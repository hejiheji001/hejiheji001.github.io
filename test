<!doctype html>
<!--
 *
 * Height Measurment App
 *
 * Copyright (c) 2019  Monash University
 *
 * Written by Michael Wybrow and Arvind Kaur
 *
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
-->
<html lang="en">
<head>
<title>Height Estimate</title>
<meta charset="UTF-8">
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="mobile-web-app-capable" content="yes" />
<meta name="author" content="Michael Wybrow, Arvind Kaur">
<meta name="description" content="Monash University, Australia. All rights reserved.">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<link rel="shortcut icon" sizes="196x196" href="https://eng1003.monash/resources/surveyapp.png" />
<link rel="apple-touch-icon-precomposed" href="https://eng1003.monash/resources/surveyapp.png" />
<style type="text/css">
  html, body {
	height: 100%;
	margin: 0;
	padding: 0;
}

.settings{
  height: 50px;
  width:50px;
  position: absolute;
  right: 0px;
}

.videocamOn{
  height: 50px;
  width:50px;
  position: relative;
  left: 0px;
}

.videocamOff{
  height: 50px;
  width:50px;
  position: relative;
  
}

video#cameraVideo
{
  height: calc(100vh - 400px);
  width: 100%;
}

#top{
  width:calc(50% - 11px);
  position: absolute;
  left:0px;
}

#bottom{
  width: 50%;
  position: absolute;
  right: 10px;
}

#video{
  height: calc(100vh - 400px);
  width: 100%
}

#video-container {
	/* view height, minus header bar height and bottom div */
	height: calc(100vh - 500px);
	position: relative;
}

.bg-video {
	/* Prevent vertical scrolling */
	height: calc(100vh - 56px);
	width: 100%;
	object-fit: cover;
}

.resizeIconLeft{
	position: relative;
	left: 0px;
}

.resizeIconRight{
  position: relative;
  right: 0px;
}

#calculateButton{
  width: calc(100vw - 10px);
}

#infoTable{
  width: calc(100vw - 10px);
}

#hud {
	position: absolute;
	top: 0px; /* header is 44px high */
	padding-left: 5px;
	padding-top: 5px;
	left: 2px;
	font-size: 1.2em;

	/* white with black outline: */
	color: white;
	text-shadow:
	-1px -1px 0 #000,
	1px -1px 0 #000,
	-1px 1px 0 #000,
	1px 1px 0 #000;
}

.crosshairs {
	width: 300px;
	height: 300px;
	position: absolute;
	top: 0px;
	bottom: 0px;
	left: 0px;
	right: 0px;
	margin-left: auto;
	margin-right: auto;
	margin-top: auto;
	margin-bottom: auto;
}
</style>
</head>
<body>
	<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
		  <header class="mdl-layout__header">
			<div class="mdl-layout__header-row">
			  <span class="mdl-layout-title" id="header">Height Measurement App</span>

			  <img id="cameraHeight" onclick="setCameraHeight()" class="settings" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIj48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDIwdjIwSDBWMHoiLz48cGF0aCBkPSJNMTUuOTUgMTAuNzhjLjAzLS4yNS4wNS0uNTEuMDUtLjc4cy0uMDItLjUzLS4wNi0uNzhsMS42OS0xLjMyYy4xNS0uMTIuMTktLjM0LjEtLjUxbC0xLjYtMi43N2MtLjEtLjE4LS4zMS0uMjQtLjQ5LS4xOGwtMS45OS44Yy0uNDItLjMyLS44Ni0uNTgtMS4zNS0uNzhMMTIgMi4zNGMtLjAzLS4yLS4yLS4zNC0uNC0uMzRIOC40Yy0uMiAwLS4zNi4xNC0uMzkuMzRsLS4zIDIuMTJjLS40OS4yLS45NC40Ny0xLjM1Ljc4bC0xLjk5LS44Yy0uMTgtLjA3LS4zOSAwLS40OS4xOGwtMS42IDIuNzdjLS4xLjE4LS4wNi4zOS4xLjUxbDEuNjkgMS4zMmMtLjA0LjI1LS4wNy41Mi0uMDcuNzhzLjAyLjUzLjA2Ljc4TDIuMzcgMTIuMWMtLjE1LjEyLS4xOS4zNC0uMS41MWwxLjYgMi43N2MuMS4xOC4zMS4yNC40OS4xOGwxLjk5LS44Yy40Mi4zMi44Ni41OCAxLjM1Ljc4bC4zIDIuMTJjLjA0LjIuMi4zNC40LjM0aDMuMmMuMiAwIC4zNy0uMTQuMzktLjM0bC4zLTIuMTJjLjQ5LS4yLjk0LS40NyAxLjM1LS43OGwxLjk5LjhjLjE4LjA3LjM5IDAgLjQ5LS4xOGwxLjYtMi43N2MuMS0uMTguMDYtLjM5LS4xLS41MWwtMS42Ny0xLjMyek0xMCAxM2MtMS42NSAwLTMtMS4zNS0zLTNzMS4zNS0zIDMtMyAzIDEuMzUgMyAzLTEuMzUgMy0zIDN6Ii8+PC9zdmc+"/>
			  <div class="mdl-tooltip" data-mdl-for="cameraHeight">
			  Set camera height
			  </div>
			</div>
		  </header>

		  <main class="mdl-layout__content" >
			  <div class="page-content" data-role="page" id="camera-page">
					<div id="video-container">
						  <video muted autoplay id="cameraVideo"></video>
						  <object class="crosshairs" type="image/svg+xml" data="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0ic3ZnNDU0MSIKICAgdmlld0JveD0iMCAwIDIwNC44MjMwMyAyMDQuMzcxOTYiCiAgIGhlaWdodD0iMjA0LjM3MTk2bW0iCiAgIHdpZHRoPSIyMDQuODIzMDNtbSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQ1NDMiPgogICAgPGZpbHRlcgogICAgICAgaWQ9ImZpbHRlcjUzMTAiCiAgICAgICB4PSItMC4yIgogICAgICAgeT0iLTAuMiIKICAgICAgIHdpZHRoPSIxLjQiCiAgICAgICBoZWlnaHQ9IjEuNCIKICAgICAgIHN0eWxlPSJjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM6c1JHQiI+CiAgICAgIDxmZUdhdXNzaWFuQmx1cgogICAgICAgICBpZD0iZmVHYXVzc2lhbkJsdXI1MzEyIgogICAgICAgICByZXN1bHQ9ImJsdXIxIgogICAgICAgICBzdGREZXZpYXRpb249IjQiCiAgICAgICAgIGluPSJTb3VyY2VBbHBoYSIgLz4KICAgICAgPGZlQ29tcG9zaXRlCiAgICAgICAgIGlkPSJmZUNvbXBvc2l0ZTUzMTQiCiAgICAgICAgIHJlc3VsdD0iY29tcG9zaXRlMSIKICAgICAgICAgb3BlcmF0b3I9Im91dCIKICAgICAgICAgaW4yPSJibHVyMSIKICAgICAgICAgaW49IlNvdXJjZUdyYXBoaWMiIC8+CiAgICAgIDxmZUNvbG9yTWF0cml4CiAgICAgICAgIGlkPSJmZUNvbG9yTWF0cml4NTMxNiIKICAgICAgICAgcmVzdWx0PSJjb2xvcm1hdHJpeDEiCiAgICAgICAgIHZhbHVlcz0iMSAwIDAgMCAwIDAgMSAwIDAgMCAwIDAgMSAwIDAgMCAwIDAgMTAwIC0xICIgLz4KICAgICAgPGZlR2F1c3NpYW5CbHVyCiAgICAgICAgIGlkPSJmZUdhdXNzaWFuQmx1cjUzMTgiCiAgICAgICAgIHJlc3VsdD0iYmx1cjIiCiAgICAgICAgIHN0ZERldmlhdGlvbj0iMC41IiAvPgogICAgICA8ZmVDb21wb3NpdGUKICAgICAgICAgaWQ9ImZlQ29tcG9zaXRlNTMyMCIKICAgICAgICAgcmVzdWx0PSJjb21wb3NpdGUyIgogICAgICAgICBvcGVyYXRvcj0ib3ZlciIKICAgICAgICAgaW4yPSJibHVyMiIKICAgICAgICAgaW49ImJsdXIyIiAvPgogICAgICA8ZmVDb2xvck1hdHJpeAogICAgICAgICBpZD0iZmVDb2xvck1hdHJpeDUzMjIiCiAgICAgICAgIHJlc3VsdD0iY29sb3JtYXRyaXgyIgogICAgICAgICB2YWx1ZXM9IjEgMCAwIDAgMCAwIDEgMCAwIDAgMCAwIDEgMCAwIDAgMCAwIDUwIC01ICIgLz4KICAgICAgPGZlR2F1c3NpYW5CbHVyCiAgICAgICAgIGlkPSJmZUdhdXNzaWFuQmx1cjUzMjQiCiAgICAgICAgIHJlc3VsdD0iYmx1cjMiCiAgICAgICAgIHN0ZERldmlhdGlvbj0iMSIgLz4KICAgICAgPGZlQ29sb3JNYXRyaXgKICAgICAgICAgaWQ9ImZlQ29sb3JNYXRyaXg1MzI2IgogICAgICAgICByZXN1bHQ9ImNvbG9ybWF0cml4MyIKICAgICAgICAgdmFsdWVzPSIxIDAgMCAwIDAgMCAxIDAgMCAwIDAgMCAxIDAgMCAwIDAgMCA1IC0xICIgLz4KICAgICAgPGZlRmxvb2QKICAgICAgICAgaWQ9ImZlRmxvb2Q1MzI4IgogICAgICAgICByZXN1bHQ9ImZsb29kIgogICAgICAgICBmbG9vZC1jb2xvcj0icmdiKDAsMCwwKSIKICAgICAgICAgZmxvb2Qtb3BhY2l0eT0iMSIgLz4KICAgICAgPGZlQ29tcG9zaXRlCiAgICAgICAgIGlkPSJmZUNvbXBvc2l0ZTUzMzAiCiAgICAgICAgIHJlc3VsdD0iY29tcG9zaXRlMyIKICAgICAgICAgb3BlcmF0b3I9ImluIgogICAgICAgICBpbjI9ImNvbG9ybWF0cml4MyIKICAgICAgICAgaW49ImZsb29kIiAvPgogICAgICA8ZmVDb21wb3NpdGUKICAgICAgICAgaWQ9ImZlQ29tcG9zaXRlNTMzMiIKICAgICAgICAgcmVzdWx0PSJjb21wb3NpdGU0IgogICAgICAgICBvcGVyYXRvcj0ib3V0IgogICAgICAgICBpbjI9ImNvbG9ybWF0cml4MyIKICAgICAgICAgaW49IlNvdXJjZUdyYXBoaWMiIC8+CiAgICAgIDxmZUNvbXBvc2l0ZQogICAgICAgICBrND0iMCIKICAgICAgICAgazE9IjAiCiAgICAgICAgIGlkPSJmZUNvbXBvc2l0ZTUzMzQiCiAgICAgICAgIHJlc3VsdD0iY29tcG9zaXRlNSIKICAgICAgICAgb3BlcmF0b3I9ImFyaXRobWV0aWMiCiAgICAgICAgIGszPSIxIgogICAgICAgICBrMj0iMSIKICAgICAgICAgaW4yPSJjb21wb3NpdGUzIgogICAgICAgICBpbj0iY29tcG9zaXRlNCIgLz4KICAgIDwvZmlsdGVyPgogIDwvZGVmcz4KICA8bWV0YWRhdGEKICAgICBpZD0ibWV0YWRhdGE0NTQ2Ij4KICAgIDxyZGY6UkRGPgogICAgICA8Y2M6V29yawogICAgICAgICByZGY6YWJvdXQ9IiI+CiAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICAgICAgPGRjOnR5cGUKICAgICAgICAgICByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIiAvPgogICAgICAgIDxkYzp0aXRsZT48L2RjOnRpdGxlPgogICAgICA8L2NjOldvcms+CiAgICA8L3JkZjpSREY+CiAgPC9tZXRhZGF0YT4KICA8ZwogICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjU4ODQ4NzIsLTQ2LjMxNDAyMSkiCiAgICAgaWQ9ImxheWVyMSI+CiAgICA8cGF0aAogICAgICAgZD0ibSAxNDUuMjUzNDgsMTQ4LjY0NTc0IC04MS4yOTI1MzUsMCBtIDExNC4xOTAxNTUsMCAtMTQuOTU1OTYsMCBtIC0xMTYuMzkwMjc1LDAgLTE0Ljk1NTk1LDAgbSA3Mi43NTgyODUsNTcuODg4MjkgMCwxNC45NTU5NiBtIDAsLTE0NS45Nzk5NzEgMCwxNC45NTU5NSBtIDY1Ljc2Nzg4LDU4LjE3OTc3MSBBIDY1Ljc2Nzg2OCw2NS43Njc4NjggMCAwIDEgMTA0LjYwNzIyLDIxNC40MTM2IDY1Ljc2Nzg2OCw2NS43Njc4NjggMCAwIDEgMzguODM5MzM1LDE0OC42NDU3NCA2NS43Njc4NjgsNjUuNzY3ODY4IDAgMCAxIDEwNC42MDcyMiw4Mi44Nzc4NzkgNjUuNzY3ODY4LDY1Ljc2Nzg2OCAwIDAgMSAxNzAuMzc1MDgsMTQ4LjY0NTc0IFoiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDo1O3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIgogICAgICAgaWQ9InBhdGg0NTI5LTctOC05LTctNyIgLz4KICAgIDxwYXRoCiAgICAgICBkPSJtIDE0NS4yNTM0NywxNDguNjQ1NzQgLTgxLjI5MjUyNywwIG0gMTE0LjE5MDE1NywwIC0xNC45NTU5NiwwIG0gLTExNi4zOTAyNzcsMCAtMTQuOTU1OTUsMCBtIDcyLjc1ODI4Nyw1Ny44ODgzIDAsMTQuOTU1OTUgbSAwLC0xNDUuOTc5OTY5IDAsMTQuOTU1OTUgbSA2NS43Njc4OCw1OC4xNzk3NjkgYSA2NS43Njc4NjgsNjUuNzY3ODY4IDAgMCAxIC02NS43Njc4Niw2NS43Njc4NyA2NS43Njc4NjgsNjUuNzY3ODY4IDAgMCAxIC02NS43Njc4ODcsLTY1Ljc2Nzg3IDY1Ljc2Nzg2OCw2NS43Njc4NjggMCAwIDEgNjUuNzY3ODg3LC02NS43Njc4NTkgNjUuNzY3ODY4LDY1Ljc2Nzg2OCAwIDAgMSA2NS43Njc4Niw2NS43Njc4NTkgeiIKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOiNmZmZmZmY7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBpZD0icGF0aDQ1MjktNy04LTktNyIgLz4KICA8L2c+Cjwvc3ZnPgo="></object>
					</div>
					<img id="videoOn" onclick="initialiseCamera()" class="videocamOn" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE3IDEwLjVWN2MwLS41NS0uNDUtMS0xLTFINGMtLjU1IDAtMSAuNDUtMSAxdjEwYzAgLjU1LjQ1IDEgMSAxaDEyYy41NSAwIDEtLjQ1IDEtMXYtMy41bDQgNHYtMTFsLTQgNHoiLz48L3N2Zz4="/>
					<div class="mdl-tooltip" data-mdl-for="videoOn">
					Switch video on
					</div>

					<img id="videoOff" onclick="stopCamera()" class="videocamOff" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMCAwaDI0djI0SDB6bTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik0yMSA2LjVsLTQgNFY3YzAtLjU1LS40NS0xLTEtMUg5LjgyTDIxIDE3LjE4VjYuNXpNMy4yNyAyTDIgMy4yNyA0LjczIDZINGMtLjU1IDAtMSAuNDUtMSAxdjEwYzAgLjU1LjQ1IDEgMSAxaDEyYy4yMSAwIC4zOS0uMDguNTQtLjE4TDE5LjczIDIxIDIxIDE5LjczIDMuMjcgMnoiLz48L3N2Zz4="/>
					<div class="mdl-tooltip" data-mdl-for="videoOff">
					Switch video off
					</div>

					<div>
					  <button id="top" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect">Set base</button>
						<button id="bottom" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect">Set top</button><br/>
					  </br/>
						<button id="calculateButton" class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-js-ripple-effect">Calculate...</button><br/>
					  </br/>
					<div>
					  <table id="infoTable" class="mdl-data-table mdl-js-data-table mdl-shadow--2dp">
						<tbody>
						  <tr>
							<td class="mdl-data-table__cell--non-numeric">Height of the camera</td>
							<td id="heightOfCamera" class="mdl-data-table__cell--non-numeric"></td>
						  </tr>
						  <tr>
							<td class="mdl-data-table__cell--non-numeric">Top angle</td>
							<td id="topAngle" class="mdl-data-table__cell--non-numeric"></td>
						  </tr>
						  <tr>
							<td class="mdl-data-table__cell--non-numeric">Base angle</td>
							<td id="baseAngle" class="mdl-data-table__cell--non-numeric"></td>
						  </tr>
						  <tr>
							<td class="mdl-data-table__cell--non-numeric">Height of the object</td>
							<td id="heightOfObject" class="mdl-data-table__cell--non-numeric"></td>
						  </tr>
						  <tr>
							<td class="mdl-data-table__cell--non-numeric">Distance of the object</td>
							<td id="distanceOfObject" class="mdl-data-table__cell--non-numeric"></td>
						  </tr>
						</tbody>
					  </table>
					</div>
				  </div>
			  </div>
		  </main>
		  <label id="toast"></label>
	</div>
	<script id="camera">
	 

	  // to check the status of the camera
	  let cameraStaus = false;

	  function cameraErrorCallback(error)
	  {
		console.log("Camera error: ", error);
	  }

	  // stopCamera is a function used to stop the camera.
	  // if the camera is not running, the code in this function will not run.
	  function stopCamera()
	  {
		  if(cameraStaus)
		  {
			  let videoElem = document.getElementById("cameraVideo");
			  let stream = videoElem.srcObject;
			  let tracks = stream.getTracks();

			  tracks.forEach(function(track) {
				track.stop();
			  });

			videoElem.srcObject = null;
		  }
	  }

	  // initialiseCamera is a function used to start the camera.
	  // if the camera is already running, it will not run the code again
	  function initialiseCamera()
	  {
		  if(!cameraStaus)
		  {
			  if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices)
			  {
				  cameraErrorCallback("enumerateDevices() not supported.");
				  return;
			  }

			  // Support different browsers
			  navigator.getUserMedia = navigator.getUserMedia ||
									   navigator.webkitGetUserMedia ||
									   navigator.mozGetUserMedia ||
									   navigator.msGetUserMedia;

			  var videoDevices = [];
			  navigator.mediaDevices.enumerateDevices().then(function(devices) {
			  	
				  devices.forEach(function (device) {
					  if (device.kind == "videoinput") {
						  videoDevices.push(device);
					  }
				  });
			  }).then(function() {
				  var deviceId = videoDevices[videoDevices.length - 1].deviceId;

				  var constraints = {
					  audio:false,
					  video: {
						  deviceId: deviceId
					  },
				  };

				  navigator.mediaDevices.getUserMedia(constraints)
					  .then(function(mediaStream) {
						  var videoElement = document.querySelector("video");
						  videoElement.srcObject = mediaStream;
						  videoElement.onloadedmetadata = function(e) {
							  videoElement.play();
						  };
						  // displayElementsWithClass("cameraError", false);
					  })
					  .catch(function(err) {
						  cameraErrorCallback(err);
					  });
			  });
			  cameraStaus = true;
			}
	  }

	</script>
</body>
</html>
